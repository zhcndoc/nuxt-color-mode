import{ap as L,ac as N,ab as P,r as y,aq as q,l as D,k as S,C as T,D as R,g as G,H as z,ah as B}from"./Ci4Lo9sU.js";function w(e){return N()?(P(e),!0):!1}function X(e){let t=0,n,i;const a=()=>{t-=1,i&&t<=0&&(i.stop(),n=void 0,i=void 0)};return(...o)=>(t+=1,i||(i=L(!0),n=i.run(()=>e(...o))),w(a),n)}function b(e){return typeof e=="function"?e():D(e)}const A=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const F=e=>e!=null,H=Object.prototype.toString,I=e=>H.call(e)==="[object Object]",V=()=>{};function $(e){let t;function n(){return t||(t=e()),t}return n.reset=async()=>{const i=t;t=void 0,i&&await i},n}function J(e,t,n={}){const{immediate:i=!0}=n,a=y(!1);let o=null;function l(){o&&(clearTimeout(o),o=null)}function s(){a.value=!1,l()}function c(...u){l(),a.value=!0,o=setTimeout(()=>{a.value=!1,o=null,e(...u)},b(t))}return i&&(a.value=!0,A&&c()),w(s),{isPending:q(a),start:c,stop:s}}const E=A?window:void 0,x=A?window.navigator:void 0;function W(e){var t;const n=b(e);return(t=n==null?void 0:n.$el)!=null?t:n}function g(...e){let t,n,i,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,i,a]=e,t=E):[t,n,i,a]=e,!t)return V;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const o=[],l=()=>{o.forEach(r=>r()),o.length=0},s=(r,d,p,v)=>(r.addEventListener(d,p,v),()=>r.removeEventListener(d,p,v)),c=T(()=>[W(t),b(a)],([r,d])=>{if(l(),!r)return;const p=I(d)?{...d}:d;o.push(...n.flatMap(v=>i.map(h=>s(r,v,h,p))))},{immediate:!0,flush:"post"}),u=()=>{c(),l()};return w(u),u}function K(){const e=y(!1),t=z();return t&&G(()=>{e.value=!0},t),e}function C(e){const t=K();return S(()=>(t.value,!!e()))}function Q(e,t,n={}){const{window:i=E,...a}=n;let o;const l=C(()=>i&&"MutationObserver"in i),s=()=>{o&&(o.disconnect(),o=void 0)},c=S(()=>{const p=b(e),v=(Array.isArray(p)?p:[p]).map(W).filter(F);return new Set(v)}),u=T(()=>c.value,p=>{s(),l.value&&p.size&&(o=new MutationObserver(t),p.forEach(v=>o.observe(v,a)))},{immediate:!0,flush:"post"}),r=()=>o==null?void 0:o.takeRecords(),d=()=>{u(),s()};return w(d),{isSupported:l,stop:d,takeRecords:r}}function Y(e={}){var t;const{window:n=E,deep:i=!0,triggerOnRemoval:a=!1}=e,o=(t=e.document)!=null?t:n==null?void 0:n.document,l=()=>{var u;let r=o==null?void 0:o.activeElement;if(i)for(;r!=null&&r.shadowRoot;)r=(u=r==null?void 0:r.shadowRoot)==null?void 0:u.activeElement;return r},s=y(),c=()=>{s.value=l()};return n&&(g(n,"blur",u=>{u.relatedTarget===null&&c()},!0),g(n,"focus",c,!0)),a&&Q(o,u=>{u.filter(r=>r.removedNodes.length).map(r=>Array.from(r.removedNodes)).flat().forEach(r=>{r===s.value&&c()})},{childList:!0,subtree:!0}),c(),s}function M(e,t={}){const{controls:n=!1,navigator:i=x}=t,a=C(()=>i&&"permissions"in i),o=R(),l=typeof e=="string"?{name:e}:e,s=R(),c=()=>{var r,d;s.value=(d=(r=o.value)==null?void 0:r.state)!=null?d:"prompt"};g(o,"change",c);const u=$(async()=>{if(a.value){if(!o.value)try{o.value=await i.permissions.query(l)}catch{o.value=void 0}finally{c()}if(n)return B(o.value)}});return u(),n?{state:s,isSupported:a,query:u}:s}function Z(e={}){const{navigator:t=x,read:n=!1,source:i,copiedDuring:a=1500,legacy:o=!1}=e,l=C(()=>t&&"clipboard"in t),s=M("clipboard-read"),c=M("clipboard-write"),u=S(()=>l.value||o),r=y(""),d=y(!1),p=J(()=>d.value=!1,a);function v(){l.value&&_(s.value)?t.clipboard.readText().then(f=>{r.value=f}):r.value=j()}u.value&&n&&g(["copy","cut"],v);async function h(f=b(i)){u.value&&f!=null&&(l.value&&_(c.value)?await t.clipboard.writeText(f):k(f),r.value=f,d.value=!0,p.start())}function k(f){const m=document.createElement("textarea");m.value=f??"",m.style.position="absolute",m.style.opacity="0",document.body.appendChild(m),m.select(),document.execCommand("copy"),m.remove()}function j(){var f,m,O;return(O=(m=(f=document==null?void 0:document.getSelection)==null?void 0:f.call(document))==null?void 0:m.toString())!=null?O:""}function _(f){return f==="granted"||f==="prompt"}return{isSupported:u,text:r,copied:d,copy:h}}export{Y as a,Z as b,X as c,W as u};
